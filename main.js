!function(){"use strict";var e=class{constructor(e,t,s){let{name:r,link:i,_id:n,isLiked:o}=e,{handleCardClick:a,handleDeleteClick:l,handleLikeClick:c}=t;this._title=r,this._link=i,this._id=n,this._isLiked=o,this._cardTemplate=s,this._handleCardClick=a,this._handleDeleteClick=l,this._handleLikeClick=c}_getTemplate(){return this._cardTemplate.cloneNode(!0).querySelector(".card")}setLike(e){this._isLiked=e,this._renderLike()}_renderLike=()=>{this._likeBtn.classList.toggle("card__like-button_active")};removeCard=()=>{this._cardElement.remove(),this._cardElement=null};_setEventListeners(){this._cardImage.addEventListener("click",this._handleCardClick),this._likeBtn.addEventListener("click",(()=>{this._handleLikeClick(this._id)})),this._deleteBtn.addEventListener("click",this._handleDeleteClick)}getView(){return this._cardElement=this._getTemplate(),this._cardTitle=this._cardElement.querySelector(".card__title"),this._cardImage=this._cardElement.querySelector(".card__image"),this._likeBtn=this._cardElement.querySelector(".card__like-button"),this._deleteBtn=this._cardElement.querySelector(".card__delete-button"),this._cardTitle.textContent=this._title,this._cardImage.alt=this._title,this._cardImage.src=this._link,this._setEventListeners(),this._cardElement}},t=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_showInputError(e,t){const s=this._formElement.querySelector(`.${e.id}-error`);e.classList.add(this._inputErrorClass),s.textContent=t,s.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`.${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}_setEventListeners(){this._inputList=[...this._formElement.querySelectorAll(this._inputSelector)],this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._toggleButtonState(),this.checkInputValidity(e)}))}))}enableValidation(){this._setEventListeners()}},s=class{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._container=t}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}setItem(e){this._container.prepend(e)}},r=class{constructor(e){let{popup:t}=e;this._popup=t}open(){this._popup.classList.add("modal_opened"),document.addEventListener("keydown",this._handleCloseByEsc)}close(){this._popup.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleCloseByEsc)}_handleCloseByEsc=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popup.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal")||e.target.classList.contains("modal__close-button"))&&this.close()}))}},i=class extends r{constructor(e,t){let{popup:s,handleFormSubmit:r}=e;super({popup:s}),this._popupForm=this._popup,this._handleFormSubmit=r,this._inputSelector=t.inputSelector,this._inputList=[...this._popupForm.querySelectorAll(this._inputSelector)]}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),e.target.reset()}))}};const n=document.querySelector(".profile__title"),o=document.querySelector(".profile__description"),a=document.querySelector(".profile__image"),l=document.querySelector(".gallery__cards"),c=document.querySelector("#card-template").content,h=document.getElementById("edit-modal"),d=document.getElementById("new-card-modal"),u=document.getElementById("avatar-edit-modal"),_=document.getElementById("delete-confirmation-modal"),p=document.getElementById("preview-image-modal"),m=p.querySelector(".preview-image"),E=p.querySelector(".image-description"),v=document.querySelector(".profile__edit-button"),k=document.querySelector(".profile__plus-button"),L=document.querySelector(".edit__avatar-button"),b={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__confirm-button",inactiveButtonClass:"modal__confirm-button_inactive",inputErrorClass:"modal__input_type_error",errorClass:"modal__input-error_active"};const g=new class{constructor(e){let{userName:t,userDescription:s,userProfileImage:r}=e;this._userName=t,this._userDescription=s,this._userProfileImage=r}getUserInfo(){const e={};return e.name=this._userName.textContent,e.about=this._userDescription.textContent,e}setUserInfo(e){this._userName.textContent=e.name,this._userDescription.textContent=e.about}setUserProfileImage(e){this._userProfileImage.src=e.avatar,this._userProfileImage.alt=this._userName.textContent}}({userName:n,userDescription:o,userProfileImage:a}),f=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}_checkServerResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getUserInformation(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._checkServerResponse)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkServerResponse)}editProfileData(e){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._checkServerResponse)}addNewCard(e){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.title,link:e.link})}).then(this._checkServerResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkServerResponse)}addLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._checkServerResponse)}deleteLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._checkServerResponse)}updateProfileImage(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.avatar})}).then(this._checkServerResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"9fbfab1b-69d6-43a9-b085-60d57b074309","Content-Type":"application/json"}}),S=f.getUserInformation().catch((e=>console.error(e))),I=f.getInitialCards().catch((e=>console.error(e)));Promise.all([S,I]).then((e=>{let[t,r]=e;g.setUserInfo(t),g.setUserProfileImage(t),new s({items:r,renderer:y},l).renderItems()}));const C={},y=t=>{const s=(t=>{const s=new e(t,{handleCardClick:()=>w.open(t),handleDeleteClick:()=>{T.open(),T.submitForm((()=>{f.deleteCard(t._id).then((()=>{T.close(),s.removeCard()})).catch((e=>console.error(e)))}))},handleLikeClick:e=>{e._isLiked?f.deleteLike(e).then((e=>{s.setLike(e.isLiked)})).catch((e=>console.error(e))):f.addLike(e).then((e=>{s.setLike(e.isLiked)})).catch((e=>console.error(e)))}},c);return s.getView()})(t);B.setItem(s)},B=new s({items:[],renderer:()=>{}},l),w=new class extends r{constructor(e,t){let{popupImage:s,popupImageText:r}=e;super({popup:t}),this._popup=t,this._popupImage=s,this._popupImageText=r}open(e){super.open(),this._popupImage.src=e.link,this._popupImage.alt=e.name,this._popupImageText.textContent=e.name}}({popupImage:m,popupImageText:E},p),U=new i({popup:h,handleFormSubmit:e=>{f.editProfileData(e).then((e=>{g.setUserInfo(e),U.close()})).catch((e=>console.error(e)))}},b),q=new i({popup:d,handleFormSubmit:e=>{f.addNewCard(e).then((e=>{y(e),q.close()})).catch((e=>console.error(e)))}},b),P=new i({popup:u,handleFormSubmit:e=>{f.updateProfileImage(e).then((e=>{g.setUserProfileImage(e),P.close()})).catch((e=>console.error(e)))}},b),T=new class extends r{constructor(e,t){let{popup:s}=e;super({popup:s}),this._popupForm=this._popup,this._submitButton=t.submitButtonSelector}submitForm(e){this._handleFormSubmit=e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit()}))}}({popup:_},b);v.addEventListener("click",(()=>{const e=g.getUserInfo();U.setInputValues(e),C["edit-form"].resetValidation(),U.open()})),k.addEventListener("click",(()=>{C["new-card-form"].resetValidation(),q.open()})),L.addEventListener("click",(()=>{C["avatar-edit-form"].resetValidation(),P.open()})),w.setEventListeners(),U.setEventListeners(),q.setEventListeners(),P.setEventListeners(),T.setEventListeners(),(e=>{[...document.querySelectorAll(e.formSelector)].forEach((s=>{const r=new t(e,s),i=s.getAttribute("name");C[i]=r,r.enableValidation()}))})(b)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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d0YsV0FBV25FLGlCQUFpQixVQUFXMkQsSUFDMUNBLEVBQUlnQixpQkFDSmhHLEtBQUt5RixtQkFBbUIsR0FFNUIsR0owSkEsQ0FDRWhCLE1BQU9rQyxHQUVUL0UsR0FrQkZtRixFQUFlMUYsaUJBQWlCLFNBZkx5SyxLQUN6QixNQUFNbkUsRUFBV1IsRUFBU08sY0FDMUIyRCxFQUFhdkYsZUFBZTZCLEdBQzVCOEMsRUFBZSxhQUFhOUcsa0JBQzVCMEgsRUFBYTFHLE1BQU0sSUFZckJxQyxFQUFXM0YsaUJBQWlCLFNBVkUwSyxLQUM1QnRCLEVBQWUsaUJBQWlCOUcsa0JBQ2hDNkgsRUFBYTdHLE1BQU0sSUFTckJzQyxFQUFjNUYsaUJBQWlCLFNBUEYySyxLQUMzQnZCLEVBQWUsb0JBQW9COUcsa0JBQ25DK0gsRUFBZS9HLE1BQU0sSUFPdkJrRyxFQUFXM0Ysb0JBQ1htRyxFQUFhbkcsb0JBQ2JzRyxFQUFhdEcsb0JBQ2J3RyxFQUFleEcsb0JBQ2Y0RixFQUFlNUYsb0JBakpXdEQsS0FDUCxJQUFJZ0QsU0FBU2YsaUJBQWlCakMsRUFBT3NGLGVBQzdDdEQsU0FBU3FJLElBQ2hCLE1BQU1DLEVBQVksSUFBSUMsRUFBY3ZLLEVBQVFxSyxHQUN0Q0csRUFBV0gsRUFBS0ksYUFBYSxRQUVuQzVCLEVBQWUyQixHQUFZRixFQUMzQkEsRUFBVXBJLGtCQUFrQixHQUM1QixFQTJJSkEsQ0FBaUJsQyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICB7IG5hbWUsIGxpbmssIF9pZCwgaXNMaWtlZCB9LFxyXG4gICAgeyBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZURlbGV0ZUNsaWNrLCBoYW5kbGVMaWtlQ2xpY2sgfSxcclxuICAgIGNhcmRUZW1wbGF0ZVxyXG4gICkge1xyXG4gICAgdGhpcy5fdGl0bGUgPSBuYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGxpbms7XHJcbiAgICB0aGlzLl9pZCA9IF9pZDtcclxuICAgIHRoaXMuX2lzTGlrZWQgPSBpc0xpa2VkO1xyXG4gICAgdGhpcy5fY2FyZFRlbXBsYXRlID0gY2FyZFRlbXBsYXRlO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gdGhpcy5fY2FyZFRlbXBsYXRlXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSlcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKTtcclxuXHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBzZXRMaWtlKGlzTGlrZWQpIHtcclxuICAgIHRoaXMuX2lzTGlrZWQgPSBpc0xpa2VkO1xyXG4gICAgdGhpcy5fcmVuZGVyTGlrZSgpO1xyXG4gIH1cclxuXHJcbiAgX3JlbmRlckxpa2UgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9saWtlQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICAvLyB0aGlzLl9pc0xpa2VkID0gIWlzTGlrZWQ7XHJcbiAgfTtcclxuXHJcbiAgcmVtb3ZlQ2FyZCA9ICgpID0+IHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIH07XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2FyZENsaWNrKTtcclxuXHJcbiAgICB0aGlzLl9saWtlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayh0aGlzLl9pZCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9kZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKTtcclxuICB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcblxyXG4gICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9saWtlQnRuID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ0biA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl90aXRsZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl90aXRsZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcclxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xyXG5cclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuXHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcblxyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIGNoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gW1xyXG4gICAgICAuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpLFxyXG4gICAgXTtcclxuXHJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XHJcbiIsImNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldEl0ZW0oaXRlbSkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbSk7XHJcbiAgICAvLyB0aGlzLnJlbmRlckl0ZW1zKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTZWN0aW9uO1xyXG4iLCJjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cCB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cCA9IHBvcHVwO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVDbG9zZUJ5RXNjKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUNsb3NlQnlFc2MpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUNsb3NlQnlFc2MgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIikgfHxcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZS1idXR0b25cIilcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXA7XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwLCBoYW5kbGVGb3JtU3VibWl0IH0sIGNvbmZpZykge1xyXG4gICAgc3VwZXIoeyBwb3B1cCB9KTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBbXHJcbiAgICAgIC4uLnRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpLFxyXG4gICAgXTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGZvcm1WYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICBldnQudGFyZ2V0LnJlc2V0KCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEZvcm07XHJcbiIsImNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG4vLyBQcm9maWxlIGRhdGFcclxuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xyXG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xyXG5jb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbWFnZVwiKTtcclxuLy8gQ2FyZCBnYWxsZXJ5ICsgY2FyZCB0ZW1wbGF0ZVxyXG5jb25zdCBjYXJkR2FsbGVyeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9fY2FyZHNcIik7XHJcbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKS5jb250ZW50O1xyXG4vLyBBbGwgbW9kYWxzXHJcbmNvbnN0IGVkaXRNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdC1tb2RhbFwiKTtcclxuY29uc3QgbmV3Q2FyZE1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuZXctY2FyZC1tb2RhbFwiKTtcclxuY29uc3QgYXZhdGFyTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImF2YXRhci1lZGl0LW1vZGFsXCIpO1xyXG5jb25zdCBkZWxldGVDYXJkTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlbGV0ZS1jb25maXJtYXRpb24tbW9kYWxcIik7XHJcbmNvbnN0IHByZXZpZXdJbWFnZU1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcmV2aWV3LWltYWdlLW1vZGFsXCIpO1xyXG4vLyBQcmV2aWV3IGltYWdlICsgdGV4dFxyXG5jb25zdCBwcmV2aWV3SW1hZ2UgPSBwcmV2aWV3SW1hZ2VNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLnByZXZpZXctaW1hZ2VcIik7XHJcbmNvbnN0IHByZXZpZXdJbWFnZVRleHQgPSBwcmV2aWV3SW1hZ2VNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLmltYWdlLWRlc2NyaXB0aW9uXCIpO1xyXG4vLyBCdXR0b25zXHJcbmNvbnN0IHByb2ZpbGVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcclxuY29uc3QgbmV3Q2FyZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fcGx1cy1idXR0b25cIik7XHJcbmNvbnN0IGF2YXRhckVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXRfX2F2YXRhci1idXR0b25cIik7XHJcblxyXG5jb25zdCBjb25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fY29uZmlybS1idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19jb25maXJtLWJ1dHRvbl9pbmFjdGl2ZVwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IHtcclxuICBwcm9maWxlTmFtZSxcclxuICBwcm9maWxlRGVzY3JpcHRpb24sXHJcbiAgcHJvZmlsZUF2YXRhcixcclxuICBjYXJkR2FsbGVyeSxcclxuICBjYXJkVGVtcGxhdGUsXHJcbiAgZWRpdE1vZGFsLFxyXG4gIG5ld0NhcmRNb2RhbCxcclxuICBhdmF0YXJNb2RhbCxcclxuICBkZWxldGVDYXJkTW9kYWwsXHJcbiAgcHJldmlld0ltYWdlTW9kYWwsXHJcbiAgcHJldmlld0ltYWdlVGV4dCxcclxuICBwcmV2aWV3SW1hZ2UsXHJcbiAgcHJvZmlsZUVkaXRCdG4sXHJcbiAgbmV3Q2FyZEJ0bixcclxuICBhdmF0YXJFZGl0QnRuLFxyXG4gIGNvbmZpZyxcclxufTtcclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi9zcmMvY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIvc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIvc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tIFwiL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIvc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IHtcclxuICBwcm9maWxlTmFtZSxcclxuICBwcm9maWxlRGVzY3JpcHRpb24sXHJcbiAgcHJvZmlsZUF2YXRhcixcclxuICBjYXJkR2FsbGVyeSxcclxuICBjYXJkVGVtcGxhdGUsXHJcbiAgZWRpdE1vZGFsLFxyXG4gIG5ld0NhcmRNb2RhbCxcclxuICBhdmF0YXJNb2RhbCxcclxuICBkZWxldGVDYXJkTW9kYWwsXHJcbiAgcHJldmlld0ltYWdlTW9kYWwsXHJcbiAgcHJldmlld0ltYWdlVGV4dCxcclxuICBwcmV2aWV3SW1hZ2UsXHJcbiAgcHJvZmlsZUVkaXRCdG4sXHJcbiAgbmV3Q2FyZEJ0bixcclxuICBhdmF0YXJFZGl0QnRuLFxyXG4gIGNvbmZpZyxcclxufSBmcm9tIFwiL3NyYy91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiL3NyYy9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG4vLyBVc2VyIERhdGFcclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIHVzZXJOYW1lOiBwcm9maWxlTmFtZSxcclxuICB1c2VyRGVzY3JpcHRpb246IHByb2ZpbGVEZXNjcmlwdGlvbixcclxuICB1c2VyUHJvZmlsZUltYWdlOiBwcm9maWxlQXZhdGFyLFxyXG59KTtcclxuLy8gQXBpIEluc3RhbnRpYXRpb25cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiOWZiZmFiMWItNjlkNi00M2E5LWIwODUtNjBkNTdiMDc0MzA5XCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuY29uc3QgdXNlckRhdGEgPSBhcGkuZ2V0VXNlckluZm9ybWF0aW9uKCkuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcclxuY29uc3QgYXBpQ2FyZHMgPSBhcGkuZ2V0SW5pdGlhbENhcmRzKCkuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcclxuUHJvbWlzZS5hbGwoW3VzZXJEYXRhLCBhcGlDYXJkc10pLnRoZW4oKFt1c2VyRGF0YSwgaW5pdGlhbENhcmRzXSkgPT4ge1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJEYXRhKTtcclxuICB1c2VySW5mby5zZXRVc2VyUHJvZmlsZUltYWdlKHVzZXJEYXRhKTtcclxuICBjb25zdCBhcGlDYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gICAge1xyXG4gICAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgICByZW5kZXJlcjogYWRkQ2FyZCxcclxuICAgIH0sXHJcbiAgICBjYXJkR2FsbGVyeVxyXG4gICk7XHJcbiAgYXBpQ2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxufSk7XHJcbi8vIFNldCB2YWxpZGF0aW9uIGZvciBhbGwgZm9ybXNcclxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcclxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcclxuICBjb25zdCBmb3JtTGlzdCA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpXTtcclxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtKSA9PiB7XHJcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm0pO1xyXG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtLmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XHJcblxyXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xyXG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICB9KTtcclxufTtcclxuLy8gQ3JlYXRlIENhcmQgKyBBZGQgQ2FyZCBGdW5jdGlvbnNcclxuY29uc3QgY3JlYXRlQ2FyZCA9IChjYXJkRGF0YSkgPT4ge1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoXHJcbiAgICBjYXJkRGF0YSxcclxuICAgIHtcclxuICAgICAgaGFuZGxlQ2FyZENsaWNrOiAoKSA9PiBwb3B1cEltYWdlLm9wZW4oY2FyZERhdGEpLFxyXG4gICAgICBoYW5kbGVEZWxldGVDbGljazogKCkgPT4ge1xyXG4gICAgICAgIGRlbGV0ZU1vZGFsTmV3Lm9wZW4oKTtcclxuICAgICAgICBkZWxldGVNb2RhbE5ldy5zdWJtaXRGb3JtKCgpID0+IHtcclxuICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAuZGVsZXRlQ2FyZChjYXJkRGF0YS5faWQpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICBkZWxldGVNb2RhbE5ldy5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgIGNhcmRFbGVtZW50LnJlbW92ZUNhcmQoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGhhbmRsZUxpa2VDbGljazogKGNhcmRJZCkgPT4ge1xyXG4gICAgICAgIGlmICghY2FyZElkLl9pc0xpa2VkKSB7XHJcbiAgICAgICAgICBhcGlcclxuICAgICAgICAgICAgLmFkZExpa2UoY2FyZElkKVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgY2FyZEVsZW1lbnQuc2V0TGlrZShyZXMuaXNMaWtlZCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBhcGlcclxuICAgICAgICAgICAgLmRlbGV0ZUxpa2UoY2FyZElkKVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgY2FyZEVsZW1lbnQuc2V0TGlrZShyZXMuaXNMaWtlZCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBjYXJkVGVtcGxhdGVcclxuICApO1xyXG4gIHJldHVybiBjYXJkRWxlbWVudC5nZXRWaWV3KCk7XHJcbn07XHJcbmNvbnN0IGFkZENhcmQgPSAoY2FyZERhdGEpID0+IHtcclxuICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XHJcbiAgY2FyZFNlY3Rpb24uc2V0SXRlbShjYXJkKTtcclxufTtcclxuLy8gU2VjdGlvbiBpbnN0YW5jZSB0byB1c2UgbWV0aG9kc1xyXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBbXSxcclxuICAgIHJlbmRlcmVyOiAoKSA9PiB7fSxcclxuICB9LFxyXG4gIGNhcmRHYWxsZXJ5XHJcbik7XHJcbi8vIFBvcHVwIEluc3RhbnRpYXRpb25zXHJcbmNvbnN0IHBvcHVwSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXHJcbiAge1xyXG4gICAgcG9wdXBJbWFnZTogcHJldmlld0ltYWdlLFxyXG4gICAgcG9wdXBJbWFnZVRleHQ6IHByZXZpZXdJbWFnZVRleHQsXHJcbiAgfSxcclxuICBwcmV2aWV3SW1hZ2VNb2RhbFxyXG4pO1xyXG5jb25zdCBlZGl0TW9kYWxOZXcgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICB7XHJcbiAgICBwb3B1cDogZWRpdE1vZGFsLFxyXG4gICAgaGFuZGxlRm9ybVN1Ym1pdDogKGVkaXRNb2RhbERhdGEpID0+IHtcclxuICAgICAgYXBpXHJcbiAgICAgICAgLmVkaXRQcm9maWxlRGF0YShlZGl0TW9kYWxEYXRhKVxyXG4gICAgICAgIC50aGVuKChlZGl0TW9kYWxEYXRhKSA9PiB7XHJcbiAgICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhlZGl0TW9kYWxEYXRhKTtcclxuICAgICAgICAgIGVkaXRNb2RhbE5ldy5jbG9zZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgY29uZmlnXHJcbik7XHJcbmNvbnN0IGNhcmRNb2RhbE5ldyA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIHtcclxuICAgIHBvcHVwOiBuZXdDYXJkTW9kYWwsXHJcbiAgICBoYW5kbGVGb3JtU3VibWl0OiAobmV3Q2FyZERhdGEpID0+IHtcclxuICAgICAgYXBpXHJcbiAgICAgICAgLmFkZE5ld0NhcmQobmV3Q2FyZERhdGEpXHJcbiAgICAgICAgLnRoZW4oKG5ld0NhcmREYXRhKSA9PiB7XHJcbiAgICAgICAgICBhZGRDYXJkKG5ld0NhcmREYXRhKTtcclxuICAgICAgICAgIGNhcmRNb2RhbE5ldy5jbG9zZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgY29uZmlnXHJcbik7XHJcbmNvbnN0IGF2YXRhck1vZGFsTmV3ID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAge1xyXG4gICAgcG9wdXA6IGF2YXRhck1vZGFsLFxyXG4gICAgaGFuZGxlRm9ybVN1Ym1pdDogKGF2YXRhckRhdGEpID0+IHtcclxuICAgICAgYXBpXHJcbiAgICAgICAgLnVwZGF0ZVByb2ZpbGVJbWFnZShhdmF0YXJEYXRhKVxyXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgIHVzZXJJbmZvLnNldFVzZXJQcm9maWxlSW1hZ2UocmVzKTtcclxuICAgICAgICAgIGF2YXRhck1vZGFsTmV3LmNsb3NlKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBjb25maWdcclxuKTtcclxuY29uc3QgZGVsZXRlTW9kYWxOZXcgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFxyXG4gIHtcclxuICAgIHBvcHVwOiBkZWxldGVDYXJkTW9kYWwsXHJcbiAgfSxcclxuICBjb25maWdcclxuKTtcclxuLy8gSGFuZGxlciBGdW5jdGlvbnNcclxuY29uc3QgaGFuZGxlRWRpdEZvcm1PcGVuID0gKCkgPT4ge1xyXG4gIGNvbnN0IHVzZXJEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBlZGl0TW9kYWxOZXcuc2V0SW5wdXRWYWx1ZXModXNlckRhdGEpO1xyXG4gIGZvcm1WYWxpZGF0b3JzW1wiZWRpdC1mb3JtXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGVkaXRNb2RhbE5ldy5vcGVuKCk7XHJcbn07XHJcbmNvbnN0IGhhbmRsZU5ld0NhcmRGb3JtT3BlbiA9ICgpID0+IHtcclxuICBmb3JtVmFsaWRhdG9yc1tcIm5ldy1jYXJkLWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgY2FyZE1vZGFsTmV3Lm9wZW4oKTtcclxufTtcclxuY29uc3QgaGFuZGxlQXZhdGFyRWRpdE9wZW4gPSAoKSA9PiB7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJhdmF0YXItZWRpdC1mb3JtXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGF2YXRhck1vZGFsTmV3Lm9wZW4oKTtcclxufTtcclxuLy8gQ2xpY2sgSGFuZGxlcnNcclxucHJvZmlsZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUVkaXRGb3JtT3Blbik7XHJcbm5ld0NhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZU5ld0NhcmRGb3JtT3Blbik7XHJcbmF2YXRhckVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUF2YXRhckVkaXRPcGVuKTtcclxuLy8gRXZlbnQgTGlzdGVuZXJzXHJcbnBvcHVwSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuZWRpdE1vZGFsTmV3LnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmNhcmRNb2RhbE5ldy5zZXRFdmVudExpc3RlbmVycygpO1xyXG5hdmF0YXJNb2RhbE5ldy5zZXRFdmVudExpc3RlbmVycygpO1xyXG5kZWxldGVNb2RhbE5ldy5zZXRFdmVudExpc3RlbmVycygpO1xyXG4vLyBFbmFibGUgYWxsIGZvcm0gdmFsaWRhdGlvblxyXG5lbmFibGVWYWxpZGF0aW9uKGNvbmZpZyk7XHJcbiIsImNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IHVzZXJOYW1lLCB1c2VyRGVzY3JpcHRpb24sIHVzZXJQcm9maWxlSW1hZ2UgfSkge1xyXG4gICAgdGhpcy5fdXNlck5hbWUgPSB1c2VyTmFtZTtcclxuICAgIHRoaXMuX3VzZXJEZXNjcmlwdGlvbiA9IHVzZXJEZXNjcmlwdGlvbjtcclxuICAgIHRoaXMuX3VzZXJQcm9maWxlSW1hZ2UgPSB1c2VyUHJvZmlsZUltYWdlO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICBjb25zdCB1c2VyRGF0YSA9IHt9O1xyXG5cclxuICAgIHVzZXJEYXRhLm5hbWUgPSB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudDtcclxuICAgIHVzZXJEYXRhLmFib3V0ID0gdGhpcy5fdXNlckRlc2NyaXB0aW9uLnRleHRDb250ZW50O1xyXG5cclxuICAgIHJldHVybiB1c2VyRGF0YTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKGluZm8pIHtcclxuICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gaW5mby5uYW1lO1xyXG4gICAgdGhpcy5fdXNlckRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gaW5mby5hYm91dDtcclxuICB9XHJcblxyXG4gIHNldFVzZXJQcm9maWxlSW1hZ2UoZGF0YSkge1xyXG4gICAgdGhpcy5fdXNlclByb2ZpbGVJbWFnZS5zcmMgPSBkYXRhLmF2YXRhcjtcclxuICAgIHRoaXMuX3VzZXJQcm9maWxlSW1hZ2UuYWx0ID0gdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQ7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBVc2VySW5mbztcclxuIiwiY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcclxuICB9XHJcblxyXG4gIF9jaGVja1NlcnZlclJlc3BvbnNlKHJlcykge1xyXG4gICAgaWYgKHJlcy5vaykge1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIH1cclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvcm1hdGlvbigpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tTZXJ2ZXJSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrU2VydmVyUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZWRpdFByb2ZpbGVEYXRhKHVzZXJEYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogdXNlckRhdGEubmFtZSxcclxuICAgICAgICBhYm91dDogdXNlckRhdGEuYWJvdXQsXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1NlcnZlclJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGFkZE5ld0NhcmQoY2FyZERhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IGNhcmREYXRhLnRpdGxlLFxyXG4gICAgICAgIGxpbms6IGNhcmREYXRhLmxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1NlcnZlclJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrU2VydmVyUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgYWRkTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tTZXJ2ZXJSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1NlcnZlclJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVByb2ZpbGVJbWFnZShsaW5rKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogbGluay5hdmF0YXIsXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1NlcnZlclJlc3BvbnNlKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFwaTtcclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwSW1hZ2UsIHBvcHVwSW1hZ2VUZXh0IH0sIHBvcHVwKSB7XHJcbiAgICBzdXBlcih7IHBvcHVwIH0pO1xyXG4gICAgdGhpcy5fcG9wdXAgPSBwb3B1cDtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSBwb3B1cEltYWdlO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZVRleHQgPSBwb3B1cEltYWdlVGV4dDtcclxuICB9XHJcblxyXG4gIG9wZW4oZGF0YSkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2VUZXh0LnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXAgfSwgY29uZmlnKSB7XHJcbiAgICBzdXBlcih7IHBvcHVwIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXA7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgfVxyXG5cclxuICBzdWJtaXRGb3JtKGNhbGxCYWNrKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gY2FsbEJhY2s7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aENvbmZpcm1hdGlvbjtcclxuIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwiX3JlZiIsIl9yZWYyIiwiY2FyZFRlbXBsYXRlIiwibmFtZSIsImxpbmsiLCJfaWQiLCJpc0xpa2VkIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJ0aGlzIiwiX3RpdGxlIiwiX2xpbmsiLCJfaXNMaWtlZCIsIl9jYXJkVGVtcGxhdGUiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsIl9nZXRUZW1wbGF0ZSIsImNsb25lTm9kZSIsInF1ZXJ5U2VsZWN0b3IiLCJzZXRMaWtlIiwiX3JlbmRlckxpa2UiLCJfbGlrZUJ0biIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInJlbW92ZUNhcmQiLCJfY2FyZEVsZW1lbnQiLCJyZW1vdmUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2FyZEltYWdlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9kZWxldGVCdG4iLCJnZXRWaWV3IiwiX2NhcmRUaXRsZSIsInRleHRDb250ZW50IiwiYWx0Iiwic3JjIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsImFkZCIsIl9oaWRlSW5wdXRFcnJvciIsImNoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRMaXN0Iiwic29tZSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9idXR0b25FbGVtZW50Iiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwicmVzZXRWYWxpZGF0aW9uIiwiZm9yRWFjaCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlbmFibGVWYWxpZGF0aW9uIiwiY29udGFpbmVyIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJzZXRJdGVtIiwicHJlcGVuZCIsInBvcHVwIiwiX3BvcHVwIiwib3BlbiIsImRvY3VtZW50IiwiX2hhbmRsZUNsb3NlQnlFc2MiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXAiLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJmb3JtVmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInNldElucHV0VmFsdWVzIiwiZGF0YSIsInByZXZlbnREZWZhdWx0IiwicmVzZXQiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsInByb2ZpbGVBdmF0YXIiLCJjYXJkR2FsbGVyeSIsImNvbnRlbnQiLCJlZGl0TW9kYWwiLCJnZXRFbGVtZW50QnlJZCIsIm5ld0NhcmRNb2RhbCIsImF2YXRhck1vZGFsIiwiZGVsZXRlQ2FyZE1vZGFsIiwicHJldmlld0ltYWdlTW9kYWwiLCJwcmV2aWV3SW1hZ2UiLCJwcmV2aWV3SW1hZ2VUZXh0IiwicHJvZmlsZUVkaXRCdG4iLCJuZXdDYXJkQnRuIiwiYXZhdGFyRWRpdEJ0biIsImZvcm1TZWxlY3RvciIsInVzZXJJbmZvIiwidXNlck5hbWUiLCJ1c2VyRGVzY3JpcHRpb24iLCJ1c2VyUHJvZmlsZUltYWdlIiwiX3VzZXJOYW1lIiwiX3VzZXJEZXNjcmlwdGlvbiIsIl91c2VyUHJvZmlsZUltYWdlIiwiZ2V0VXNlckluZm8iLCJ1c2VyRGF0YSIsImFib3V0Iiwic2V0VXNlckluZm8iLCJpbmZvIiwic2V0VXNlclByb2ZpbGVJbWFnZSIsImF2YXRhciIsImFwaSIsIm9wdGlvbnMiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJfY2hlY2tTZXJ2ZXJSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRVc2VySW5mb3JtYXRpb24iLCJmZXRjaCIsInRoZW4iLCJnZXRJbml0aWFsQ2FyZHMiLCJlZGl0UHJvZmlsZURhdGEiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFkZE5ld0NhcmQiLCJjYXJkRGF0YSIsInRpdGxlIiwiZGVsZXRlQ2FyZCIsImNhcmRJZCIsImFkZExpa2UiLCJkZWxldGVMaWtlIiwidXBkYXRlUHJvZmlsZUltYWdlIiwiYXV0aG9yaXphdGlvbiIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiYXBpQ2FyZHMiLCJhbGwiLCJpbml0aWFsQ2FyZHMiLCJTZWN0aW9uIiwiYWRkQ2FyZCIsImZvcm1WYWxpZGF0b3JzIiwiY2FyZCIsImNhcmRFbGVtZW50IiwiQ2FyZCIsInBvcHVwSW1hZ2UiLCJkZWxldGVNb2RhbE5ldyIsInN1Ym1pdEZvcm0iLCJjcmVhdGVDYXJkIiwiY2FyZFNlY3Rpb24iLCJwb3B1cEltYWdlVGV4dCIsIl9wb3B1cEltYWdlIiwiX3BvcHVwSW1hZ2VUZXh0IiwiZWRpdE1vZGFsTmV3IiwiUG9wdXBXaXRoRm9ybSIsImVkaXRNb2RhbERhdGEiLCJjYXJkTW9kYWxOZXciLCJuZXdDYXJkRGF0YSIsImF2YXRhck1vZGFsTmV3IiwiYXZhdGFyRGF0YSIsIl9zdWJtaXRCdXR0b24iLCJjYWxsQmFjayIsImhhbmRsZUVkaXRGb3JtT3BlbiIsImhhbmRsZU5ld0NhcmRGb3JtT3BlbiIsImhhbmRsZUF2YXRhckVkaXRPcGVuIiwiZm9ybSIsInZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSJdLCJzb3VyY2VSb290IjoiIn0=