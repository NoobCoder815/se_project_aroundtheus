!function(){"use strict";var e=class{constructor(e,t,s){let{name:r,link:i,isLiked:n,_id:a}=e,{handleCardClick:o,handleCardDelete:l,handleCardLike:d}=t;this._title=r,this._link=i,this._id=a,this.isLiked=n,this._cardTemplate=s,this._handleCardClick=o,this._handleCardDelete=l,this._handleCardLike=d}_getTemplate(){return this._cardTemplate.cloneNode(!0).querySelector(".card")}setLikeStatus(e){this.isLiked=e,this._renderLike()}_renderLike=()=>{this.isLiked?this._likeBtn.classList.add("card__like-button_active"):this._likeBtn.classList.remove("card__like-button_active")};removeCard=()=>{this._cardElement.remove(),this._cardElement=null};_setEventListeners(){this._cardImage.addEventListener("click",this._handleCardClick),this._likeBtn.addEventListener("click",(()=>{this._handleCardLike(this._id)})),this._deleteBtn.addEventListener("click",this._handleCardDelete)}getView(){return this._cardElement=this._getTemplate(),this._cardTitle=this._cardElement.querySelector(".card__title"),this._cardImage=this._cardElement.querySelector(".card__image"),this._likeBtn=this._cardElement.querySelector(".card__like-button"),this._deleteBtn=this._cardElement.querySelector(".card__delete-button"),this._cardTitle.textContent=this._title,this._cardImage.alt=this._title,this._cardImage.src=this._link,this._renderLike(),this._setEventListeners(),this._cardElement}},t=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_showInputError(e,t){const s=this._formElement.querySelector(`.${e.id}-error`);e.classList.add(this._inputErrorClass),s.textContent=t,s.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`.${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}_setEventListeners(){this._inputList=[...this._formElement.querySelectorAll(this._inputSelector)],this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._toggleButtonState(),this._checkInputValidity(e)}))}))}enableValidation(){this._setEventListeners()}},s=class{constructor(e){let{popup:t}=e;this._popup=t}open(){this._popup.classList.add("modal_opened"),document.addEventListener("keydown",this._handleCloseByEsc)}close(){this._popup.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleCloseByEsc)}_handleCloseByEsc=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popup.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal")||e.target.classList.contains("modal__close-button"))&&this.close()}))}},r=class extends s{constructor(e,t){let{popup:s,handleFormSubmit:r}=e;super({popup:s}),this._handleFormSubmit=r,this._popupForm=this._popup.querySelector(t.formSelector),this._inputList=[...this._popup.querySelectorAll(t.inputSelector)],this._submitBtn=this._popup.querySelector(t.submitButtonSelector),this._submitBtnText=this._submitBtn.textContent}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitBtn.textContent=e?t:this._submitBtnText}resetForm(){this._popupForm.reset()}setEventListeners(){super.setEventListeners(),this._popup.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}};const i=document.querySelector(".profile__title"),n=document.querySelector(".profile__description"),a=document.querySelector(".profile__image"),o=document.querySelector(".gallery__cards"),l=document.querySelector("#card-template").content,d=document.getElementById("edit-modal"),u=document.getElementById("new-card-modal"),h=document.getElementById("avatar-edit-modal"),c=document.getElementById("delete-confirmation-modal"),_=document.getElementById("preview-image-modal"),m=_.querySelector(".preview-image"),p=_.querySelector(".image-name"),E=document.querySelector(".edit-profile-button"),v=document.querySelector(".add-new-card-button"),b=document.querySelector(".edit-avatar-button"),L={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__confirm-button",inactiveButtonClass:"modal__confirm-button_inactive",inputErrorClass:"modal__input_type_error",errorClass:"modal__input-error_active"};function g(e,t,s){t.renderLoading(!0,s),e().then((()=>{t.close()})).catch(console.error).finally((()=>{t.renderLoading(!1)}))}const S=new class{constructor(e,t,s){this._userName=e,this._userDescription=t,this._userProfileImage=s}getUserInfo(){const e={};return e.name=this._userName.textContent,e.about=this._userDescription.textContent,e}setUserInfo(e){this._userName.textContent=e.name,this._userDescription.textContent=e.about}setUserProfileImage(e){this._userProfileImage.src=e.avatar,this._userProfileImage.alt=this._userName.textContent}}(i,n,a),C=t=>{const s=(t=>{const s=new e(t,{handleCardClick:()=>k.open(t),handleCardDelete:()=>{q.open(),q.submit((()=>{g((function(){return x.deleteCard(t._id).then(s.removeCard())}),q,"Deleting...")}))},handleCardLike:e=>{s.isLiked?x.deleteLike(e).then((e=>s.setLikeStatus(e.isLiked))).catch(console.error):x.addLike(e).then((e=>s.setLikeStatus(e.isLiked))).catch(console.error)}},l);return s.getView()})(t);f.setItem(s)},f=new class{constructor(e,t){this._renderer=e,this._container=t}renderItems(e){e.forEach((e=>{this._renderer(e)}))}setItem(e){this._container.prepend(e)}}(C,o),k=new class extends s{constructor(e,t,s){super({popup:s}),this._popupImage=e,this._popupImageText=t}open(e){super.open(),this._popupImage.src=e.link,this._popupImage.alt=e.name,this._popupImageText.textContent=e.name}}(m,p,_),I=new r({popup:d,handleFormSubmit:e=>{g((function(){return x.editProfileData(e).then((e=>{S.setUserInfo(e),I.resetForm()}))}),I)}},L),y=new r({popup:u,handleFormSubmit:e=>{g((function(){return x.addNewCard(e).then((e=>{C(e),y.resetForm()}))}),y)}},L),B=new r({popup:h,handleFormSubmit:e=>{g((function(){return x.updateProfileImage(e).then((e=>{S.setUserProfileImage(e),B.resetForm()}))}),B)}},L),q=new class extends s{constructor(e,t){super({popup:e}),this._submitBtn=this._popup.querySelector(t.submitButtonSelector),this._submitBtnText=this._submitBtn.textContent}submit(e){this._handleSubmit=e}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitBtn.textContent=e?t:this._submitBtnText}setEventListeners(){super.setEventListeners(),this._popup.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit()}))}}(c,L);E.addEventListener("click",(()=>{I.setInputValues(S.getUserInfo()),w["edit-form"].resetValidation(),I.open()})),v.addEventListener("click",(()=>{w["new-card-form"].resetValidation(),y.open()})),b.addEventListener("click",(()=>{w["avatar-edit-form"].resetValidation(),B.open()})),k.setEventListeners(),I.setEventListeners(),y.setEventListeners(),B.setEventListeners(),q.setEventListeners();const w={};(e=>{[...document.querySelectorAll(e.formSelector)].forEach((s=>{const r=new t(e,s),i=s.getAttribute("name");w[i]=r,r.enableValidation()}))})(L);const x=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}_checkServerResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}_request(e,t){return fetch(e,t).then(this._checkServerResponse)}getUserInformation(){return this._request(`${this._baseUrl}/users/me`,{headers:this._headers})}getInitialCards(){return this._request(`${this._baseUrl}/cards`,{headers:this._headers})}editProfileData(e){return this._request(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})})}addNewCard(e){return this._request(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.title,link:e.link})})}deleteCard(e){return this._request(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers})}addLike(e){return this._request(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers})}deleteLike(e){return this._request(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers})}updateProfileImage(e){return this._request(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.avatar})})}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"9fbfab1b-69d6-43a9-b085-60d57b074309","Content-Type":"application/json"}});Promise.all([x.getUserInformation(),x.getInitialCards()]).then((e=>{let[t,s]=e;S.setUserInfo(t),S.setUserProfileImage(t),f.renderItems(s)})).catch(console.error)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBZ0ZBLElDVEEsRUF2RUEsTUFDRUEsV0FBQUEsQ0FBV0MsRUFBQUMsRUFHVEMsR0FDQSxJQUhBLEtBQUVDLEVBQUksS0FBRUMsRUFBSSxRQUFFQyxFQUFPLElBQUVDLEdBQUtOLEdBQzVCLGdCQUFFTyxFQUFlLGlCQUFFQyxFQUFnQixlQUFFQyxHQUFnQlIsRUFHckRTLEtBQUtDLE9BQVNSLEVBQ2RPLEtBQUtFLE1BQVFSLEVBQ2JNLEtBQUtKLElBQU1BLEVBQ1hJLEtBQUtMLFFBQVVBLEVBQ2ZLLEtBQUtHLGNBQWdCWCxFQUNyQlEsS0FBS0ksaUJBQW1CUCxFQUN4QkcsS0FBS0ssa0JBQW9CUCxFQUN6QkUsS0FBS00sZ0JBQWtCUCxDQUN6QixDQUVBUSxZQUFBQSxHQUtFLE9BSm9CUCxLQUFLRyxjQUN0QkssV0FBVSxHQUNWQyxjQUFjLFFBR25CLENBRUFDLGFBQUFBLENBQWNmLEdBQ1pLLEtBQUtMLFFBQVVBLEVBQ2ZLLEtBQUtXLGFBQ1AsQ0FFQUEsWUFBY0EsS0FDUlgsS0FBS0wsUUFDUEssS0FBS1ksU0FBU0MsVUFBVUMsSUFBSSw0QkFFNUJkLEtBQUtZLFNBQVNDLFVBQVVFLE9BQU8sMkJBQ2pDLEVBR0ZDLFdBQWFBLEtBQ1hoQixLQUFLaUIsYUFBYUYsU0FDbEJmLEtBQUtpQixhQUFlLElBQUksRUFHMUJDLGtCQUFBQSxHQUNFbEIsS0FBS21CLFdBQVdDLGlCQUFpQixRQUFTcEIsS0FBS0ksa0JBRS9DSixLQUFLWSxTQUFTUSxpQkFBaUIsU0FBUyxLQUN0Q3BCLEtBQUtNLGdCQUFnQk4sS0FBS0osSUFBSSxJQUdoQ0ksS0FBS3FCLFdBQVdELGlCQUFpQixRQUFTcEIsS0FBS0ssa0JBQ2pELENBRUFpQixPQUFBQSxHQWVFLE9BZEF0QixLQUFLaUIsYUFBZWpCLEtBQUtPLGVBRXpCUCxLQUFLdUIsV0FBYXZCLEtBQUtpQixhQUFhUixjQUFjLGdCQUNsRFQsS0FBS21CLFdBQWFuQixLQUFLaUIsYUFBYVIsY0FBYyxnQkFDbERULEtBQUtZLFNBQVdaLEtBQUtpQixhQUFhUixjQUFjLHNCQUNoRFQsS0FBS3FCLFdBQWFyQixLQUFLaUIsYUFBYVIsY0FBYyx3QkFFbERULEtBQUt1QixXQUFXQyxZQUFjeEIsS0FBS0MsT0FDbkNELEtBQUttQixXQUFXTSxJQUFNekIsS0FBS0MsT0FDM0JELEtBQUttQixXQUFXTyxJQUFNMUIsS0FBS0UsTUFFM0JGLEtBQUtXLGNBQ0xYLEtBQUtrQixxQkFFRWxCLEtBQUtpQixZQUNkLEdDaUJGLEVBckZBLE1BQ0U1QixXQUFBQSxDQUFZc0MsRUFBUUMsR0FDbEI1QixLQUFLNkIsZUFBaUJGLEVBQU9HLGNBQzdCOUIsS0FBSytCLHNCQUF3QkosRUFBT0sscUJBQ3BDaEMsS0FBS2lDLHFCQUF1Qk4sRUFBT08sb0JBQ25DbEMsS0FBS21DLGlCQUFtQlIsRUFBT1MsZ0JBQy9CcEMsS0FBS3FDLFlBQWNWLEVBQU9XLFdBRTFCdEMsS0FBS3VDLGFBQWVYLENBQ3RCLENBRUFZLGVBQUFBLENBQWdCQyxFQUFjQyxHQUM1QixNQUFNQyxFQUFlM0MsS0FBS3VDLGFBQWE5QixjQUNwQyxJQUFHZ0MsRUFBYUcsWUFHbkJILEVBQWE1QixVQUFVQyxJQUFJZCxLQUFLbUMsa0JBQ2hDUSxFQUFhbkIsWUFBY2tCLEVBQzNCQyxFQUFhOUIsVUFBVUMsSUFBSWQsS0FBS3FDLFlBQ2xDLENBRUFRLGVBQUFBLENBQWdCSixHQUNkLE1BQU1FLEVBQWUzQyxLQUFLdUMsYUFBYTlCLGNBQ3BDLElBQUdnQyxFQUFhRyxZQUduQkgsRUFBYTVCLFVBQVVFLE9BQU9mLEtBQUttQyxrQkFDbkNRLEVBQWFuQixZQUFjLEdBQzNCbUIsRUFBYTlCLFVBQVVFLE9BQU9mLEtBQUtxQyxZQUNyQyxDQUVBUyxtQkFBQUEsQ0FBb0JMLEdBQ2JBLEVBQWFNLFNBQVNDLE1BR3pCaEQsS0FBSzZDLGdCQUFnQkosR0FGckJ6QyxLQUFLd0MsZ0JBQWdCQyxFQUFjQSxFQUFhUSxrQkFJcEQsQ0FFQUMsZ0JBQUFBLEdBQ0UsT0FBT2xELEtBQUttRCxXQUFXQyxNQUFNWCxJQUNuQkEsRUFBYU0sU0FBU0MsT0FFbEMsQ0FFQUssa0JBQUFBLEdBQ01yRCxLQUFLa0Qsb0JBQ1BsRCxLQUFLc0QsZUFBZXpDLFVBQVVDLElBQUlkLEtBQUtpQyxzQkFDdkNqQyxLQUFLc0QsZUFBZUMsYUFBYSxZQUFZLEtBRTdDdkQsS0FBS3NELGVBQWV6QyxVQUFVRSxPQUFPZixLQUFLaUMsc0JBQzFDakMsS0FBS3NELGVBQWVFLGdCQUFnQixZQUV4QyxDQUVBQyxlQUFBQSxHQUNFekQsS0FBS3FELHFCQUVMckQsS0FBS21ELFdBQVdPLFNBQVNqQixJQUN2QnpDLEtBQUs2QyxnQkFBZ0JKLEVBQWEsR0FFdEMsQ0FFQXZCLGtCQUFBQSxHQUNFbEIsS0FBS21ELFdBQWEsSUFDYm5ELEtBQUt1QyxhQUFhb0IsaUJBQWlCM0QsS0FBSzZCLGlCQUc3QzdCLEtBQUtzRCxlQUFpQnRELEtBQUt1QyxhQUFhOUIsY0FDdENULEtBQUsrQix1QkFHUC9CLEtBQUttRCxXQUFXTyxTQUFTakIsSUFDdkJBLEVBQWFyQixpQkFBaUIsU0FBUyxLQUNyQ3BCLEtBQUtxRCxxQkFDTHJELEtBQUs4QyxvQkFBb0JMLEVBQWEsR0FDdEMsR0FFTixDQUVBbUIsZ0JBQUFBLEdBQ0U1RCxLQUFLa0Isb0JBQ1AsR0NsREYsRUFoQ0EsTUFDRTdCLFdBQUFBLENBQVdDLEdBQVksSUFBWCxNQUFFdUUsR0FBT3ZFLEVBQ25CVSxLQUFLOEQsT0FBU0QsQ0FDaEIsQ0FFQUUsSUFBQUEsR0FDRS9ELEtBQUs4RCxPQUFPakQsVUFBVUMsSUFBSSxnQkFDMUJrRCxTQUFTNUMsaUJBQWlCLFVBQVdwQixLQUFLaUUsa0JBQzVDLENBRUFDLEtBQUFBLEdBQ0VsRSxLQUFLOEQsT0FBT2pELFVBQVVFLE9BQU8sZ0JBQzdCaUQsU0FBU0csb0JBQW9CLFVBQVduRSxLQUFLaUUsa0JBQy9DLENBRUFBLGtCQUFxQkcsSUFDSCxXQUFaQSxFQUFJQyxLQUNOckUsS0FBS2tFLE9BQ1AsRUFHRkksaUJBQUFBLEdBQ0V0RSxLQUFLOEQsT0FBTzFDLGlCQUFpQixhQUFjZ0QsS0FFdkNBLEVBQUlHLE9BQU8xRCxVQUFVMkQsU0FBUyxVQUM5QkosRUFBSUcsT0FBTzFELFVBQVUyRCxTQUFTLHlCQUU5QnhFLEtBQUtrRSxPQUNQLEdBRUosR0NtQkYsRUEvQ0EsY0FBNEJPLEVBQzFCcEYsV0FBQUEsQ0FBV0MsRUFBOEJxQyxHQUFRLElBQXJDLE1BQUVrQyxFQUFLLGlCQUFFYSxHQUFrQnBGLEVBQ3JDcUYsTUFBTSxDQUFFZCxVQUNSN0QsS0FBSzRFLGtCQUFvQkYsRUFDekIxRSxLQUFLNkUsV0FBYTdFLEtBQUs4RCxPQUFPckQsY0FBY2tCLEVBQU9tRCxjQUNuRDlFLEtBQUttRCxXQUFhLElBQUluRCxLQUFLOEQsT0FBT0gsaUJBQWlCaEMsRUFBT0csZ0JBQzFEOUIsS0FBSytFLFdBQWEvRSxLQUFLOEQsT0FBT3JELGNBQWNrQixFQUFPSyxzQkFDbkRoQyxLQUFLZ0YsZUFBaUJoRixLQUFLK0UsV0FBV3ZELFdBQ3hDLENBRUF5RCxlQUFBQSxHQUNFLE1BQU1DLEVBQWEsQ0FBQyxFQU1wQixPQUpBbEYsS0FBS21ELFdBQVdPLFNBQVN5QixJQUN2QkQsRUFBV0MsRUFBTTFGLE1BQVEwRixFQUFNQyxLQUFLLElBRy9CRixDQUNULENBRUFHLGNBQUFBLENBQWVDLEdBQ2J0RixLQUFLbUQsV0FBV08sU0FBU3lCLElBQ3ZCQSxFQUFNQyxNQUFRRSxFQUFLSCxFQUFNMUYsS0FBSyxHQUVsQyxDQUVBOEYsYUFBQUEsQ0FBY0MsR0FBc0MsSUFBM0JDLEVBQVdDLFVBQUFDLE9BQUEsUUFBQUMsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQUcsWUFFbkMxRixLQUFLK0UsV0FBV3ZELFlBRGRnRSxFQUM0QkMsRUFFQXpGLEtBQUtnRixjQUV2QyxDQUVBYSxTQUFBQSxHQUNFN0YsS0FBSzZFLFdBQVdpQixPQUNsQixDQUVBeEIsaUJBQUFBLEdBQ0VLLE1BQU1MLG9CQUNOdEUsS0FBSzhELE9BQU8xQyxpQkFBaUIsVUFBV2dELElBQ3RDQSxFQUFJMkIsaUJBQ0ovRixLQUFLNEUsa0JBQWtCNUUsS0FBS2lGLGtCQUFrQixHQUVsRCxHQzdDRixNQUFNZSxFQUFjaEMsU0FBU3ZELGNBQWMsbUJBQ3JDd0YsRUFBcUJqQyxTQUFTdkQsY0FBYyx5QkFDNUN5RixFQUFlbEMsU0FBU3ZELGNBQWMsbUJBRXRDMEYsRUFBY25DLFNBQVN2RCxjQUFjLG1CQUNyQ2pCLEVBQWV3RSxTQUFTdkQsY0FBYyxrQkFBa0IyRixRQUV4REMsRUFBWXJDLFNBQVNzQyxlQUFlLGNBQ3BDQyxFQUFldkMsU0FBU3NDLGVBQWUsa0JBQ3ZDRSxFQUFjeEMsU0FBU3NDLGVBQWUscUJBQ3RDRyxFQUFjekMsU0FBU3NDLGVBQWUsNkJBQ3RDSSxFQUFvQjFDLFNBQVNzQyxlQUFlLHVCQUU1Q0ssRUFBZUQsRUFBa0JqRyxjQUFjLGtCQUMvQ21HLEVBQW1CRixFQUFrQmpHLGNBQWMsZUFFbkRvRyxFQUFpQjdDLFNBQVN2RCxjQUFjLHdCQUN4Q3FHLEVBQWE5QyxTQUFTdkQsY0FBYyx3QkFDcENzRyxFQUFnQi9DLFNBQVN2RCxjQUFjLHVCQUV2Q2tCLEVBQVMsQ0FDYm1ELGFBQWMsZUFDZGhELGNBQWUsZ0JBQ2ZFLHFCQUFzQix5QkFDdEJFLG9CQUFxQixpQ0FDckJFLGdCQUFpQiwwQkFDakJFLFdBQVksNkJDMUJkLFNBQVMwRSxFQUFhQyxFQUFTQyxFQUFlekIsR0FDNUN5QixFQUFjM0IsZUFBYyxFQUFNRSxHQUNsQ3dCLElBQ0dFLE1BQUssS0FDSkQsRUFBY2hELE9BQU8sSUFFdEJrRCxNQUFNQyxRQUFRQyxPQUNkQyxTQUFRLEtBQ1BMLEVBQWMzQixlQUFjLEVBQU0sR0FFeEMsQ0NDQSxNQUFNaUMsRUFBVyxJQ1pqQixNQUNFbkksV0FBQUEsQ0FBWW9JLEVBQVVDLEVBQWlCQyxHQUNyQzNILEtBQUs0SCxVQUFZSCxFQUNqQnpILEtBQUs2SCxpQkFBbUJILEVBQ3hCMUgsS0FBSzhILGtCQUFvQkgsQ0FDM0IsQ0FFQUksV0FBQUEsR0FDRSxNQUFNQyxFQUFXLENBQUMsRUFLbEIsT0FIQUEsRUFBU3ZJLEtBQU9PLEtBQUs0SCxVQUFVcEcsWUFDL0J3RyxFQUFTQyxNQUFRakksS0FBSzZILGlCQUFpQnJHLFlBRWhDd0csQ0FDVCxDQUVBRSxXQUFBQSxDQUFZQyxHQUNWbkksS0FBSzRILFVBQVVwRyxZQUFjMkcsRUFBSzFJLEtBQ2xDTyxLQUFLNkgsaUJBQWlCckcsWUFBYzJHLEVBQUtGLEtBQzNDLENBRUFHLG1CQUFBQSxDQUFvQjlDLEdBQ2xCdEYsS0FBSzhILGtCQUFrQnBHLElBQU00RCxFQUFLK0MsT0FDbENySSxLQUFLOEgsa0JBQWtCckcsSUFBTXpCLEtBQUs0SCxVQUFVcEcsV0FDOUMsR0RYQThHLEVBQ0FBLEVBQ0FBLEdBa0NJQyxFQUFXQyxJQUNmLE1BQU1DLEVBaENZRCxLQUNsQixNQUFNRSxFQUFjLElBQUlDLEVBQ3RCSCxFQUNBLENBQ0UzSSxnQkFBaUJBLElBQU0rSSxFQUFlN0UsS0FBS3lFLEdBQzNDMUksaUJBQWtCQSxLQUNoQitJLEVBQW1COUUsT0FDbkI4RSxFQUFtQkMsUUFBTyxLQUl4QjlCLEdBSEEsV0FDRSxPQUFPK0IsRUFBSUMsV0FBV1IsRUFBUzVJLEtBQUt1SCxLQUFLdUIsRUFBWTFILGFBQ3ZELEdBQzBCNkgsRUFBb0IsY0FBYyxHQUM1RCxFQUVKOUksZUFBaUJrSixJQUNkUCxFQUFZL0ksUUFLVG9KLEVBQ0dHLFdBQVdELEdBQ1g5QixNQUFNZ0MsR0FBV1QsRUFBWWhJLGNBQWN5SSxFQUFPeEosV0FDbER5SCxNQUFNQyxRQUFRQyxPQVBqQnlCLEVBQ0dLLFFBQVFILEdBQ1I5QixNQUFNZ0MsR0FBV1QsRUFBWWhJLGNBQWN5SSxFQUFPeEosV0FDbER5SCxNQUFNQyxRQUFRQyxNQUlNLEdBRy9CZ0IsR0FFRixPQUFPSSxFQUFZcEgsU0FBUyxFQUlmK0gsQ0FBV2IsR0FDeEJjLEVBQVlDLFFBQVFkLEVBQUssRUFHckJhLEVBQWMsSUV0RHBCLE1BQ0VqSyxXQUFBQSxDQUFZbUssRUFBVUMsR0FDcEJ6SixLQUFLMEosVUFBWUYsRUFDakJ4SixLQUFLMkosV0FBYUYsQ0FDcEIsQ0FFQUcsV0FBQUEsQ0FBWUMsR0FDVkEsRUFBTW5HLFNBQVNvRyxJQUNiOUosS0FBSzBKLFVBQVVJLEVBQUssR0FFeEIsQ0FFQVAsT0FBQUEsQ0FBUU8sR0FDTjlKLEtBQUsySixXQUFXSSxRQUFRRCxFQUMxQixHRndDOEJ2QixFQUFTRCxHQUVuQ00sRUFBaUIsSUd0RHZCLGNBQTZCbkUsRUFDM0JwRixXQUFBQSxDQUFZMkssRUFBWUMsRUFBZ0JwRyxHQUN0Q2MsTUFBTSxDQUFFZCxVQUNSN0QsS0FBS2tLLFlBQWNGLEVBQ25CaEssS0FBS21LLGdCQUFrQkYsQ0FDekIsQ0FFQWxHLElBQUFBLENBQUt1QixHQUNIWCxNQUFNWixPQUNOL0QsS0FBS2tLLFlBQVl4SSxJQUFNNEQsRUFBSzVGLEtBQzVCTSxLQUFLa0ssWUFBWXpJLElBQU02RCxFQUFLN0YsS0FDNUJPLEtBQUttSyxnQkFBZ0IzSSxZQUFjOEQsRUFBSzdGLElBQzFDLEdIMkNBNkksRUFDQUEsRUFDQUEsR0FFSThCLEVBQWtCLElBQUlDLEVBQzFCLENBQ0V4RyxNQUFPeUUsRUFDUDVELGlCQUFtQjRGLElBT2pCdEQsR0FOQSxXQUNFLE9BQU8rQixFQUFJd0IsZ0JBQWdCRCxHQUFjbkQsTUFBTW1ELElBQzdDOUMsRUFBU1UsWUFBWW9DLEdBQ3JCRixFQUFnQnZFLFdBQVcsR0FFL0IsR0FDMEJ1RSxFQUFnQixHQUc5QzlCLEdBRUlrQyxFQUFjLElBQUlILEVBQ3RCLENBQ0V4RyxNQUFPeUUsRUFDUDVELGlCQUFtQitGLElBT2pCekQsR0FOQSxXQUNFLE9BQU8rQixFQUFJMkIsV0FBV0QsR0FBYXRELE1BQU1zRCxJQUN2Q2xDLEVBQVFrQyxHQUNSRCxFQUFZM0UsV0FBVyxHQUUzQixHQUMwQjJFLEVBQVksR0FHMUNsQyxHQUVJcUMsRUFBaUIsSUFBSU4sRUFDekIsQ0FDRXhHLE1BQU95RSxFQUNQNUQsaUJBQW1Ca0csSUFPakI1RCxHQU5BLFdBQ0UsT0FBTytCLEVBQUk4QixtQkFBbUJELEdBQVl6RCxNQUFNeUQsSUFDOUNwRCxFQUFTWSxvQkFBb0J3QyxHQUM3QkQsRUFBZTlFLFdBQVcsR0FFOUIsR0FDMEI4RSxFQUFlLEdBRzdDckMsR0FFSU8sRUFBcUIsSUl4RzNCLGNBQW9DcEUsRUFDbENwRixXQUFBQSxDQUFZd0UsRUFBT2xDLEdBQ2pCZ0QsTUFBTSxDQUFFZCxVQUNSN0QsS0FBSytFLFdBQWEvRSxLQUFLOEQsT0FBT3JELGNBQWNrQixFQUFPSyxzQkFDbkRoQyxLQUFLZ0YsZUFBaUJoRixLQUFLK0UsV0FBV3ZELFdBQ3hDLENBRUFzSCxNQUFBQSxDQUFPZ0MsR0FDTDlLLEtBQUsrSyxjQUFnQkQsQ0FDdkIsQ0FFQXZGLGFBQUFBLENBQWNDLEdBQXNDLElBQTNCQyxFQUFXQyxVQUFBQyxPQUFBLFFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFHLFlBRW5DMUYsS0FBSytFLFdBQVd2RCxZQURkZ0UsRUFDNEJDLEVBRUF6RixLQUFLZ0YsY0FFdkMsQ0FFQVYsaUJBQUFBLEdBQ0VLLE1BQU1MLG9CQUNOdEUsS0FBSzhELE9BQU8xQyxpQkFBaUIsVUFBV2dELElBQ3RDQSxFQUFJMkIsaUJBQ0ovRixLQUFLK0ssZUFBZSxHQUV4QixHSmdGQXpDLEVBQ0FBLEdBaUJGQSxFQUFBQSxpQkFBMEMsU0FkZjBDLEtBQ3pCWixFQUFnQi9FLGVBQWVtQyxFQUFTTyxlQUN4Q2tELEVBQWUsYUFBYXhILGtCQUM1QjJHLEVBQWdCckcsTUFBTSxJQVl4QnVFLEVBQUFBLGlCQUFzQyxTQVZSNEMsS0FDNUJELEVBQWUsaUJBQWlCeEgsa0JBQ2hDK0csRUFBWXpHLE1BQU0sSUFTcEJ1RSxFQUFBQSxpQkFBeUMsU0FQWjZDLEtBQzNCRixFQUFlLG9CQUFvQnhILGtCQUNuQ2tILEVBQWU1RyxNQUFNLElBT3ZCNkUsRUFBZXRFLG9CQUNmOEYsRUFBZ0I5RixvQkFDaEJrRyxFQUFZbEcsb0JBQ1pxRyxFQUFlckcsb0JBQ2Z1RSxFQUFtQnZFLG9CQUVuQixNQUFNMkcsRUFBaUIsQ0FBQyxFQUNFdEosS0FDUCxJQUFJcUMsU0FBU0wsaUJBQWlCaEMsRUFBT21ELGVBQzdDcEIsU0FBUzBILElBQ2hCLE1BQU1DLEVBQVksSUFBSUMsRUFBYzNKLEVBQVF5SixHQUN0Q0csRUFBV0gsRUFBS0ksYUFBYSxRQUVuQ1AsRUFBZU0sR0FBWUYsRUFDM0JBLEVBQVV6SCxrQkFBa0IsR0FDNUIsRUFFSkEsQ0FBaUIwRSxHQUVqQixNQUFNUyxFQUFNLElQcEpaLE1BQ0UxSixXQUFBQSxDQUFZb00sR0FDVnpMLEtBQUswTCxTQUFXRCxFQUFRRSxRQUN4QjNMLEtBQUs0TCxTQUFXSCxFQUFRSSxPQUMxQixDQUVBQyxvQkFBQUEsQ0FBcUJDLEdBQ25CLE9BQU9BLEVBQUlDLEdBQUtELEVBQUlFLE9BQVNDLFFBQVFDLE9BQVEsVUFBU0osRUFBSTVDLFNBQzVELENBRUFpRCxRQUFBQSxDQUFTQyxFQUFLQyxHQUNaLE9BQU9DLE1BQU1GLEVBQUtDLEdBQVFuRixLQUFLbkgsS0FBSzhMLHFCQUN0QyxDQUVBVSxrQkFBQUEsR0FDRSxPQUFPeE0sS0FBS29NLFNBQVUsR0FBRXBNLEtBQUswTCxvQkFBcUIsQ0FDaERHLFFBQVM3TCxLQUFLNEwsVUFFbEIsQ0FFQWEsZUFBQUEsR0FDRSxPQUFPek0sS0FBS29NLFNBQVUsR0FBRXBNLEtBQUswTCxpQkFBa0IsQ0FDN0NHLFFBQVM3TCxLQUFLNEwsVUFFbEIsQ0FFQXJCLGVBQUFBLENBQWdCdkMsR0FDZCxPQUFPaEksS0FBS29NLFNBQVUsR0FBRXBNLEtBQUswTCxvQkFBcUIsQ0FDaERnQixPQUFRLFFBQ1JiLFFBQVM3TCxLQUFLNEwsU0FDZGUsS0FBTUMsS0FBS0MsVUFBVSxDQUNuQnBOLEtBQU11SSxFQUFTdkksS0FDZndJLE1BQU9ELEVBQVNDLFNBR3RCLENBRUF5QyxVQUFBQSxDQUFXbEMsR0FDVCxPQUFPeEksS0FBS29NLFNBQVUsR0FBRXBNLEtBQUswTCxpQkFBa0IsQ0FDN0NnQixPQUFRLE9BQ1JiLFFBQVM3TCxLQUFLNEwsU0FDZGUsS0FBTUMsS0FBS0MsVUFBVSxDQUNuQnBOLEtBQU0rSSxFQUFTc0UsTUFDZnBOLEtBQU04SSxFQUFTOUksUUFHckIsQ0FFQXNKLFVBQUFBLENBQVdDLEdBQ1QsT0FBT2pKLEtBQUtvTSxTQUFVLEdBQUVwTSxLQUFLMEwsa0JBQWtCekMsSUFBVSxDQUN2RHlELE9BQVEsU0FDUmIsUUFBUzdMLEtBQUs0TCxVQUVsQixDQUVBeEMsT0FBQUEsQ0FBUUgsR0FDTixPQUFPakosS0FBS29NLFNBQVUsR0FBRXBNLEtBQUswTCxrQkFBa0J6QyxVQUFnQixDQUM3RHlELE9BQVEsTUFDUmIsUUFBUzdMLEtBQUs0TCxVQUVsQixDQUVBMUMsVUFBQUEsQ0FBV0QsR0FDVCxPQUFPakosS0FBS29NLFNBQVUsR0FBRXBNLEtBQUswTCxrQkFBa0J6QyxVQUFnQixDQUM3RHlELE9BQVEsU0FDUmIsUUFBUzdMLEtBQUs0TCxVQUVsQixDQUVBZixrQkFBQUEsQ0FBbUJuTCxHQUNqQixPQUFPTSxLQUFLb00sU0FBVSxHQUFFcE0sS0FBSzBMLDJCQUE0QixDQUN2RGdCLE9BQVEsUUFDUmIsUUFBUzdMLEtBQUs0TCxTQUNkZSxLQUFNQyxLQUFLQyxVQUFVLENBQ25CeEUsT0FBUTNJLEVBQUsySSxVQUduQixHT3VFa0IsQ0FDbEJzRCxRQUFTLGtEQUNURSxRQUFTLENBQ1BrQixjQUFlLHVDQUNmLGVBQWdCLHNCQUlwQmIsUUFBUWMsSUFBSSxDQUFDakUsRUFBSXlELHFCQUFzQnpELEVBQUkwRCxvQkFDeEN0RixNQUFLN0gsSUFBdUIsSUFBckIwSSxFQUFVaUYsR0FBTTNOLEVBQ3RCa0ksRUFBU1UsWUFBWUYsR0FDckJSLEVBQVNZLG9CQUFvQkosR0FDN0JzQixFQUFZTSxZQUFZcUQsRUFBTSxJQUUvQjdGLE1BQU1DLFFBQVFDLE0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3V0aWxzL3V0aWxzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tTZXJ2ZXJSZXNwb25zZShyZXMpIHtcclxuICAgIHJldHVybiByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgfVxyXG5cclxuICBfcmVxdWVzdCh1cmwsIG9wdGlvbikge1xyXG4gICAgcmV0dXJuIGZldGNoKHVybCwgb3B0aW9uKS50aGVuKHRoaXMuX2NoZWNrU2VydmVyUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm9ybWF0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlZGl0UHJvZmlsZURhdGEodXNlckRhdGEpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IHVzZXJEYXRhLm5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IHVzZXJEYXRhLmFib3V0LFxyXG4gICAgICB9KSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkTmV3Q2FyZChjYXJkRGF0YSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBjYXJkRGF0YS50aXRsZSxcclxuICAgICAgICBsaW5rOiBjYXJkRGF0YS5saW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUxpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlUHJvZmlsZUltYWdlKGxpbmspIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IGxpbmsuYXZhdGFyLFxyXG4gICAgICB9KSxcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQXBpO1xyXG4iLCJjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHsgbmFtZSwgbGluaywgaXNMaWtlZCwgX2lkIH0sXHJcbiAgICB7IGhhbmRsZUNhcmRDbGljaywgaGFuZGxlQ2FyZERlbGV0ZSwgaGFuZGxlQ2FyZExpa2UgfSxcclxuICAgIGNhcmRUZW1wbGF0ZVxyXG4gICkge1xyXG4gICAgdGhpcy5fdGl0bGUgPSBuYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGxpbms7XHJcbiAgICB0aGlzLl9pZCA9IF9pZDtcclxuICAgIHRoaXMuaXNMaWtlZCA9IGlzTGlrZWQ7XHJcbiAgICB0aGlzLl9jYXJkVGVtcGxhdGUgPSBjYXJkVGVtcGxhdGU7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkRGVsZXRlID0gaGFuZGxlQ2FyZERlbGV0ZTtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRMaWtlID0gaGFuZGxlQ2FyZExpa2U7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IHRoaXMuX2NhcmRUZW1wbGF0ZVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIik7XHJcblxyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgc2V0TGlrZVN0YXR1cyhpc0xpa2VkKSB7XHJcbiAgICB0aGlzLmlzTGlrZWQgPSBpc0xpa2VkO1xyXG4gICAgdGhpcy5fcmVuZGVyTGlrZSgpO1xyXG4gIH1cclxuXHJcbiAgX3JlbmRlckxpa2UgPSAoKSA9PiB7XHJcbiAgICBpZiAodGhpcy5pc0xpa2VkKSB7XHJcbiAgICAgIHRoaXMuX2xpa2VCdG4uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2xpa2VCdG4uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICByZW1vdmVDYXJkID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XHJcbiAgfTtcclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVDYXJkQ2xpY2spO1xyXG5cclxuICAgIHRoaXMuX2xpa2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZExpa2UodGhpcy5faWQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVDYXJkRGVsZXRlKTtcclxuICB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcblxyXG4gICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9saWtlQnRuID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ0biA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl90aXRsZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl90aXRsZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG5cclxuICAgIHRoaXMuX3JlbmRlckxpa2UoKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcclxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xyXG5cclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuXHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcblxyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIHRydWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IFtcclxuICAgICAgLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSxcclxuICAgIF07XHJcblxyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcclxuIiwiY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXAgfSkge1xyXG4gICAgdGhpcy5fcG9wdXAgPSBwb3B1cDtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlQ2xvc2VCeUVzYyk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVDbG9zZUJ5RXNjKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVDbG9zZUJ5RXNjID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsXCIpIHx8XHJcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2UtYnV0dG9uXCIpXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwO1xyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cCwgaGFuZGxlRm9ybVN1Ym1pdCB9LCBjb25maWcpIHtcclxuICAgIHN1cGVyKHsgcG9wdXAgfSk7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoY29uZmlnLmZvcm1TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBbLi4udGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvcildO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuVGV4dCA9IHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudDtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGZvcm1WYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZywgbG9hZGluZ1RleHQgPSBcIlNhdmluZy4uLlwiKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IGxvYWRpbmdUZXh0O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnRuVGV4dDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlc2V0Rm9ybSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xyXG4iLCIvLyBQcm9maWxlIGRhdGFcclxuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xyXG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xyXG5jb25zdCBwcm9maWxlSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpO1xyXG4vLyBDYXJkIGdhbGxlcnkgKyBjYXJkIHRlbXBsYXRlXHJcbmNvbnN0IGNhcmRHYWxsZXJ5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19jYXJkc1wiKTtcclxuY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpLmNvbnRlbnQ7XHJcbi8vIEFsbCBtb2RhbHNcclxuY29uc3QgZWRpdE1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0LW1vZGFsXCIpO1xyXG5jb25zdCBuZXdDYXJkTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5ldy1jYXJkLW1vZGFsXCIpO1xyXG5jb25zdCBhdmF0YXJNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYXZhdGFyLWVkaXQtbW9kYWxcIik7XHJcbmNvbnN0IGRlbGV0ZU1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZWxldGUtY29uZmlybWF0aW9uLW1vZGFsXCIpO1xyXG5jb25zdCBwcmV2aWV3SW1hZ2VNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJldmlldy1pbWFnZS1tb2RhbFwiKTtcclxuLy8gUHJldmlldyBpbWFnZSArIHRleHRcclxuY29uc3QgcHJldmlld0ltYWdlID0gcHJldmlld0ltYWdlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5wcmV2aWV3LWltYWdlXCIpO1xyXG5jb25zdCBwcmV2aWV3SW1hZ2VUZXh0ID0gcHJldmlld0ltYWdlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5pbWFnZS1uYW1lXCIpO1xyXG4vLyBCdXR0b25zXHJcbmNvbnN0IHByb2ZpbGVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LXByb2ZpbGUtYnV0dG9uXCIpO1xyXG5jb25zdCBuZXdDYXJkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtbmV3LWNhcmQtYnV0dG9uXCIpO1xyXG5jb25zdCBhdmF0YXJFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LWF2YXRhci1idXR0b25cIik7XHJcbi8vIE1vZGFsIHNlbGVjdG9yc1xyXG5jb25zdCBjb25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fY29uZmlybS1idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19jb25maXJtLWJ1dHRvbl9pbmFjdGl2ZVwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IHtcclxuICBwcm9maWxlTmFtZSxcclxuICBwcm9maWxlRGVzY3JpcHRpb24sXHJcbiAgcHJvZmlsZUltYWdlLFxyXG4gIGNhcmRHYWxsZXJ5LFxyXG4gIGNhcmRUZW1wbGF0ZSxcclxuICBlZGl0TW9kYWwsXHJcbiAgbmV3Q2FyZE1vZGFsLFxyXG4gIGF2YXRhck1vZGFsLFxyXG4gIGRlbGV0ZU1vZGFsLFxyXG4gIHByZXZpZXdJbWFnZU1vZGFsLFxyXG4gIHByZXZpZXdJbWFnZVRleHQsXHJcbiAgcHJldmlld0ltYWdlLFxyXG4gIHByb2ZpbGVFZGl0QnRuLFxyXG4gIG5ld0NhcmRCdG4sXHJcbiAgYXZhdGFyRWRpdEJ0bixcclxuICBjb25maWcsXHJcbn07XHJcbiIsIi8vIFVuaXZlcnNhbCBmdW5jdGlvbiBmb3Igc3VibWl0IGhhbmRsaW5nXHJcbmZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChyZXF1ZXN0LCBwb3B1cEluc3RhbmNlLCBsb2FkaW5nVGV4dCkge1xyXG4gIHBvcHVwSW5zdGFuY2UucmVuZGVyTG9hZGluZyh0cnVlLCBsb2FkaW5nVGV4dCk7XHJcbiAgcmVxdWVzdCgpXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIHBvcHVwSW5zdGFuY2UuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgcG9wdXBJbnN0YW5jZS5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgeyBoYW5kbGVTdWJtaXQgfTtcclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCAqIGFzIGNvbnN0YW50cyBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCB7IGhhbmRsZVN1Ym1pdCB9IGZyb20gXCIuLi91dGlscy91dGlscy5qc1wiO1xyXG4vLyBVc2VyIERhdGFcclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oXHJcbiAgY29uc3RhbnRzLnByb2ZpbGVOYW1lLFxyXG4gIGNvbnN0YW50cy5wcm9maWxlRGVzY3JpcHRpb24sXHJcbiAgY29uc3RhbnRzLnByb2ZpbGVJbWFnZVxyXG4pO1xyXG4vLyBDcmVhdGUgQ2FyZFxyXG5jb25zdCBjcmVhdGVDYXJkID0gKGNhcmREYXRhKSA9PiB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChcclxuICAgIGNhcmREYXRhLFxyXG4gICAge1xyXG4gICAgICBoYW5kbGVDYXJkQ2xpY2s6ICgpID0+IGNhcmRJbWFnZVBvcHVwLm9wZW4oY2FyZERhdGEpLFxyXG4gICAgICBoYW5kbGVDYXJkRGVsZXRlOiAoKSA9PiB7XHJcbiAgICAgICAgZGVsZXRlQ29uZmlybWF0aW9uLm9wZW4oKTtcclxuICAgICAgICBkZWxldGVDb25maXJtYXRpb24uc3VibWl0KCgpID0+IHtcclxuICAgICAgICAgIGZ1bmN0aW9uIG1ha2VSZXF1ZXN0KCkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXBpLmRlbGV0ZUNhcmQoY2FyZERhdGEuX2lkKS50aGVuKGNhcmRFbGVtZW50LnJlbW92ZUNhcmQoKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBoYW5kbGVTdWJtaXQobWFrZVJlcXVlc3QsIGRlbGV0ZUNvbmZpcm1hdGlvbiwgXCJEZWxldGluZy4uLlwiKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSxcclxuICAgICAgaGFuZGxlQ2FyZExpa2U6IChjYXJkSWQpID0+IHtcclxuICAgICAgICAhY2FyZEVsZW1lbnQuaXNMaWtlZFxyXG4gICAgICAgICAgPyBhcGlcclxuICAgICAgICAgICAgICAuYWRkTGlrZShjYXJkSWQpXHJcbiAgICAgICAgICAgICAgLnRoZW4oKHN0YXR1cykgPT4gY2FyZEVsZW1lbnQuc2V0TGlrZVN0YXR1cyhzdGF0dXMuaXNMaWtlZCkpXHJcbiAgICAgICAgICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXHJcbiAgICAgICAgICA6IGFwaVxyXG4gICAgICAgICAgICAgIC5kZWxldGVMaWtlKGNhcmRJZClcclxuICAgICAgICAgICAgICAudGhlbigoc3RhdHVzKSA9PiBjYXJkRWxlbWVudC5zZXRMaWtlU3RhdHVzKHN0YXR1cy5pc0xpa2VkKSlcclxuICAgICAgICAgICAgICAuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgY29uc3RhbnRzLmNhcmRUZW1wbGF0ZVxyXG4gICk7XHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50LmdldFZpZXcoKTtcclxufTtcclxuLy8gQWRkIENhcmRcclxuY29uc3QgYWRkQ2FyZCA9IChjYXJkRGF0YSkgPT4ge1xyXG4gIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGNhcmREYXRhKTtcclxuICBjYXJkU2VjdGlvbi5zZXRJdGVtKGNhcmQpO1xyXG59O1xyXG4vLyBDYXJkIFNlY3Rpb25cclxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihhZGRDYXJkLCBjb25zdGFudHMuY2FyZEdhbGxlcnkpO1xyXG4vLyBQb3B1cCBJbnN0YW50aWF0aW9uc1xyXG5jb25zdCBjYXJkSW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcclxuICBjb25zdGFudHMucHJldmlld0ltYWdlLFxyXG4gIGNvbnN0YW50cy5wcmV2aWV3SW1hZ2VUZXh0LFxyXG4gIGNvbnN0YW50cy5wcmV2aWV3SW1hZ2VNb2RhbFxyXG4pO1xyXG5jb25zdCBlZGl0UHJvZmlsZUZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICB7XHJcbiAgICBwb3B1cDogY29uc3RhbnRzLmVkaXRNb2RhbCxcclxuICAgIGhhbmRsZUZvcm1TdWJtaXQ6IChlZGl0Rm9ybURhdGEpID0+IHtcclxuICAgICAgZnVuY3Rpb24gbWFrZVJlcXVlc3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIGFwaS5lZGl0UHJvZmlsZURhdGEoZWRpdEZvcm1EYXRhKS50aGVuKChlZGl0Rm9ybURhdGEpID0+IHtcclxuICAgICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGVkaXRGb3JtRGF0YSk7XHJcbiAgICAgICAgICBlZGl0UHJvZmlsZUZvcm0ucmVzZXRGb3JtKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgaGFuZGxlU3VibWl0KG1ha2VSZXF1ZXN0LCBlZGl0UHJvZmlsZUZvcm0pO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIGNvbnN0YW50cy5jb25maWdcclxuKTtcclxuY29uc3QgbmV3Q2FyZEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICB7XHJcbiAgICBwb3B1cDogY29uc3RhbnRzLm5ld0NhcmRNb2RhbCxcclxuICAgIGhhbmRsZUZvcm1TdWJtaXQ6IChuZXdDYXJkRGF0YSkgPT4ge1xyXG4gICAgICBmdW5jdGlvbiBtYWtlUmVxdWVzdCgpIHtcclxuICAgICAgICByZXR1cm4gYXBpLmFkZE5ld0NhcmQobmV3Q2FyZERhdGEpLnRoZW4oKG5ld0NhcmREYXRhKSA9PiB7XHJcbiAgICAgICAgICBhZGRDYXJkKG5ld0NhcmREYXRhKTtcclxuICAgICAgICAgIG5ld0NhcmRGb3JtLnJlc2V0Rm9ybSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGhhbmRsZVN1Ym1pdChtYWtlUmVxdWVzdCwgbmV3Q2FyZEZvcm0pO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIGNvbnN0YW50cy5jb25maWdcclxuKTtcclxuY29uc3QgYXZhdGFyRWRpdEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICB7XHJcbiAgICBwb3B1cDogY29uc3RhbnRzLmF2YXRhck1vZGFsLFxyXG4gICAgaGFuZGxlRm9ybVN1Ym1pdDogKGF2YXRhckRhdGEpID0+IHtcclxuICAgICAgZnVuY3Rpb24gbWFrZVJlcXVlc3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIGFwaS51cGRhdGVQcm9maWxlSW1hZ2UoYXZhdGFyRGF0YSkudGhlbigoYXZhdGFyRGF0YSkgPT4ge1xyXG4gICAgICAgICAgdXNlckluZm8uc2V0VXNlclByb2ZpbGVJbWFnZShhdmF0YXJEYXRhKTtcclxuICAgICAgICAgIGF2YXRhckVkaXRGb3JtLnJlc2V0Rm9ybSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGhhbmRsZVN1Ym1pdChtYWtlUmVxdWVzdCwgYXZhdGFyRWRpdEZvcm0pO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIGNvbnN0YW50cy5jb25maWdcclxuKTtcclxuY29uc3QgZGVsZXRlQ29uZmlybWF0aW9uID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihcclxuICBjb25zdGFudHMuZGVsZXRlTW9kYWwsXHJcbiAgY29uc3RhbnRzLmNvbmZpZ1xyXG4pO1xyXG4vLyBIYW5kbGVyIEZ1bmN0aW9uc1xyXG5jb25zdCBoYW5kbGVFZGl0Rm9ybU9wZW4gPSAoKSA9PiB7XHJcbiAgZWRpdFByb2ZpbGVGb3JtLnNldElucHV0VmFsdWVzKHVzZXJJbmZvLmdldFVzZXJJbmZvKCkpO1xyXG4gIGZvcm1WYWxpZGF0b3JzW1wiZWRpdC1mb3JtXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGVkaXRQcm9maWxlRm9ybS5vcGVuKCk7XHJcbn07XHJcbmNvbnN0IGhhbmRsZU5ld0NhcmRGb3JtT3BlbiA9ICgpID0+IHtcclxuICBmb3JtVmFsaWRhdG9yc1tcIm5ldy1jYXJkLWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgbmV3Q2FyZEZvcm0ub3BlbigpO1xyXG59O1xyXG5jb25zdCBoYW5kbGVBdmF0YXJFZGl0T3BlbiA9ICgpID0+IHtcclxuICBmb3JtVmFsaWRhdG9yc1tcImF2YXRhci1lZGl0LWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgYXZhdGFyRWRpdEZvcm0ub3BlbigpO1xyXG59O1xyXG4vLyBDbGljayBIYW5kbGVyc1xyXG5jb25zdGFudHMucHJvZmlsZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUVkaXRGb3JtT3Blbik7XHJcbmNvbnN0YW50cy5uZXdDYXJkQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVOZXdDYXJkRm9ybU9wZW4pO1xyXG5jb25zdGFudHMuYXZhdGFyRWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQXZhdGFyRWRpdE9wZW4pO1xyXG4vLyBFdmVudCBMaXN0ZW5lcnNcclxuY2FyZEltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuZWRpdFByb2ZpbGVGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbm5ld0NhcmRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmF2YXRhckVkaXRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmRlbGV0ZUNvbmZpcm1hdGlvbi5zZXRFdmVudExpc3RlbmVycygpO1xyXG4vLyBFbmFibGUgdmFsaWRhdGlvbiBmb3IgYWxsIGZvcm1zXHJcbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XHJcbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XHJcbiAgY29uc3QgZm9ybUxpc3QgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKV07XHJcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybSkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtKTtcclxuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybS5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xyXG5cclxuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcclxuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgfSk7XHJcbn07XHJcbmVuYWJsZVZhbGlkYXRpb24oY29uc3RhbnRzLmNvbmZpZyk7XHJcbi8vIEFwaSBJbnN0YW50aWF0aW9uXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjlmYmZhYjFiLTY5ZDYtNDNhOS1iMDg1LTYwZDU3YjA3NDMwOVwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcbi8vIFNlcnZlciBSZXF1ZXN0c1xyXG5Qcm9taXNlLmFsbChbYXBpLmdldFVzZXJJbmZvcm1hdGlvbigpLCBhcGkuZ2V0SW5pdGlhbENhcmRzKCldKVxyXG4gIC50aGVuKChbdXNlckRhdGEsIGNhcmRzXSkgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEpO1xyXG4gICAgdXNlckluZm8uc2V0VXNlclByb2ZpbGVJbWFnZSh1c2VyRGF0YSk7XHJcbiAgICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcyhjYXJkcyk7XHJcbiAgfSlcclxuICAuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbiIsImNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih1c2VyTmFtZSwgdXNlckRlc2NyaXB0aW9uLCB1c2VyUHJvZmlsZUltYWdlKSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZSA9IHVzZXJOYW1lO1xyXG4gICAgdGhpcy5fdXNlckRlc2NyaXB0aW9uID0gdXNlckRlc2NyaXB0aW9uO1xyXG4gICAgdGhpcy5fdXNlclByb2ZpbGVJbWFnZSA9IHVzZXJQcm9maWxlSW1hZ2U7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIGNvbnN0IHVzZXJEYXRhID0ge307XHJcblxyXG4gICAgdXNlckRhdGEubmFtZSA9IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50O1xyXG4gICAgdXNlckRhdGEuYWJvdXQgPSB0aGlzLl91c2VyRGVzY3JpcHRpb24udGV4dENvbnRlbnQ7XHJcblxyXG4gICAgcmV0dXJuIHVzZXJEYXRhO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oaW5mbykge1xyXG4gICAgdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQgPSBpbmZvLm5hbWU7XHJcbiAgICB0aGlzLl91c2VyRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBpbmZvLmFib3V0O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlclByb2ZpbGVJbWFnZShkYXRhKSB7XHJcbiAgICB0aGlzLl91c2VyUHJvZmlsZUltYWdlLnNyYyA9IGRhdGEuYXZhdGFyO1xyXG4gICAgdGhpcy5fdXNlclByb2ZpbGVJbWFnZS5hbHQgPSB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFVzZXJJbmZvO1xyXG4iLCJjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3RvcihyZW5kZXJlciwgY29udGFpbmVyKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoaXRlbXMpIHtcclxuICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldEl0ZW0oaXRlbSkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTZWN0aW9uO1xyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwSW1hZ2UsIHBvcHVwSW1hZ2VUZXh0LCBwb3B1cCkge1xyXG4gICAgc3VwZXIoeyBwb3B1cCB9KTtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSBwb3B1cEltYWdlO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZVRleHQgPSBwb3B1cEltYWdlVGV4dDtcclxuICB9XHJcblxyXG4gIG9wZW4oZGF0YSkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2VUZXh0LnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwLCBjb25maWcpIHtcclxuICAgIHN1cGVyKHsgcG9wdXAgfSk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG5UZXh0ID0gdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50O1xyXG4gIH1cclxuXHJcbiAgc3VibWl0KGNhbGxiYWNrKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBjYWxsYmFjaztcclxuICB9XHJcblxyXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nLCBsb2FkaW5nVGV4dCA9IFwiU2F2aW5nLi4uXCIpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50ID0gbG9hZGluZ1RleHQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdG5UZXh0O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoQ29uZmlybWF0aW9uO1xyXG4iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJfcmVmIiwiX3JlZjIiLCJjYXJkVGVtcGxhdGUiLCJuYW1lIiwibGluayIsImlzTGlrZWQiLCJfaWQiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVDYXJkRGVsZXRlIiwiaGFuZGxlQ2FyZExpa2UiLCJ0aGlzIiwiX3RpdGxlIiwiX2xpbmsiLCJfY2FyZFRlbXBsYXRlIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVDYXJkRGVsZXRlIiwiX2hhbmRsZUNhcmRMaWtlIiwiX2dldFRlbXBsYXRlIiwiY2xvbmVOb2RlIiwicXVlcnlTZWxlY3RvciIsInNldExpa2VTdGF0dXMiLCJfcmVuZGVyTGlrZSIsIl9saWtlQnRuIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwicmVtb3ZlQ2FyZCIsIl9jYXJkRWxlbWVudCIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9jYXJkSW1hZ2UiLCJhZGRFdmVudExpc3RlbmVyIiwiX2RlbGV0ZUJ0biIsImdldFZpZXciLCJfY2FyZFRpdGxlIiwidGV4dENvbnRlbnQiLCJhbHQiLCJzcmMiLCJjb25maWciLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRMaXN0Iiwic29tZSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9idXR0b25FbGVtZW50Iiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwicmVzZXRWYWxpZGF0aW9uIiwiZm9yRWFjaCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlbmFibGVWYWxpZGF0aW9uIiwicG9wdXAiLCJfcG9wdXAiLCJvcGVuIiwiZG9jdW1lbnQiLCJfaGFuZGxlQ2xvc2VCeUVzYyIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cCIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX3BvcHVwRm9ybSIsImZvcm1TZWxlY3RvciIsIl9zdWJtaXRCdG4iLCJfc3VibWl0QnRuVGV4dCIsIl9nZXRJbnB1dFZhbHVlcyIsImZvcm1WYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwic2V0SW5wdXRWYWx1ZXMiLCJkYXRhIiwicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsImxvYWRpbmdUZXh0IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwicmVzZXRGb3JtIiwicmVzZXQiLCJwcmV2ZW50RGVmYXVsdCIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwicHJvZmlsZUltYWdlIiwiY2FyZEdhbGxlcnkiLCJjb250ZW50IiwiZWRpdE1vZGFsIiwiZ2V0RWxlbWVudEJ5SWQiLCJuZXdDYXJkTW9kYWwiLCJhdmF0YXJNb2RhbCIsImRlbGV0ZU1vZGFsIiwicHJldmlld0ltYWdlTW9kYWwiLCJwcmV2aWV3SW1hZ2UiLCJwcmV2aWV3SW1hZ2VUZXh0IiwicHJvZmlsZUVkaXRCdG4iLCJuZXdDYXJkQnRuIiwiYXZhdGFyRWRpdEJ0biIsImhhbmRsZVN1Ym1pdCIsInJlcXVlc3QiLCJwb3B1cEluc3RhbmNlIiwidGhlbiIsImNhdGNoIiwiY29uc29sZSIsImVycm9yIiwiZmluYWxseSIsInVzZXJJbmZvIiwidXNlck5hbWUiLCJ1c2VyRGVzY3JpcHRpb24iLCJ1c2VyUHJvZmlsZUltYWdlIiwiX3VzZXJOYW1lIiwiX3VzZXJEZXNjcmlwdGlvbiIsIl91c2VyUHJvZmlsZUltYWdlIiwiZ2V0VXNlckluZm8iLCJ1c2VyRGF0YSIsImFib3V0Iiwic2V0VXNlckluZm8iLCJpbmZvIiwic2V0VXNlclByb2ZpbGVJbWFnZSIsImF2YXRhciIsImNvbnN0YW50cyIsImFkZENhcmQiLCJjYXJkRGF0YSIsImNhcmQiLCJjYXJkRWxlbWVudCIsIkNhcmQiLCJjYXJkSW1hZ2VQb3B1cCIsImRlbGV0ZUNvbmZpcm1hdGlvbiIsInN1Ym1pdCIsImFwaSIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJkZWxldGVMaWtlIiwic3RhdHVzIiwiYWRkTGlrZSIsImNyZWF0ZUNhcmQiLCJjYXJkU2VjdGlvbiIsInNldEl0ZW0iLCJyZW5kZXJlciIsImNvbnRhaW5lciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW1zIiwiaXRlbSIsInByZXBlbmQiLCJwb3B1cEltYWdlIiwicG9wdXBJbWFnZVRleHQiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cEltYWdlVGV4dCIsImVkaXRQcm9maWxlRm9ybSIsIlBvcHVwV2l0aEZvcm0iLCJlZGl0Rm9ybURhdGEiLCJlZGl0UHJvZmlsZURhdGEiLCJuZXdDYXJkRm9ybSIsIm5ld0NhcmREYXRhIiwiYWRkTmV3Q2FyZCIsImF2YXRhckVkaXRGb3JtIiwiYXZhdGFyRGF0YSIsInVwZGF0ZVByb2ZpbGVJbWFnZSIsImNhbGxiYWNrIiwiX2hhbmRsZVN1Ym1pdCIsImhhbmRsZUVkaXRGb3JtT3BlbiIsImZvcm1WYWxpZGF0b3JzIiwiaGFuZGxlTmV3Q2FyZEZvcm1PcGVuIiwiaGFuZGxlQXZhdGFyRWRpdE9wZW4iLCJmb3JtIiwidmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIiwib3B0aW9ucyIsIl9iYXNlVXJsIiwiYmFzZVVybCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsIl9jaGVja1NlcnZlclJlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsIl9yZXF1ZXN0IiwidXJsIiwib3B0aW9uIiwiZmV0Y2giLCJnZXRVc2VySW5mb3JtYXRpb24iLCJnZXRJbml0aWFsQ2FyZHMiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInRpdGxlIiwiYXV0aG9yaXphdGlvbiIsImFsbCIsImNhcmRzIl0sInNvdXJjZVJvb3QiOiIifQ==